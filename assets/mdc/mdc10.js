(function(d,e){var c="resources/1/MobileStudio/Viewer/build/index.html";var b="resources/1/MobileStudio/Creator/build/index.html";var a="resources/1/MobileStudio/MobileStudio/index.html";e.fl.getVal=function(g){var f=mCapture.db.getCurrentSubject();return f[g[0]]};e.fl.getFormData=function(f){var g=localStorage.getItem(f+"_store");return g};e.fl.dynamicFormViewer=function(m,j){if(j.length!==4){throw new Error("Error: dynamicFormViewer was passed too few parameters")}var f=j[0];var h=j[1];var i=j[2];var g=j[3];if(!f){throw new Error("Error: dynamicFormViewer appName can not be empty")}if(!h){throw new Error("Error: dynamicFormViewer schema can not be empty")}localStorage.setItem("appName",f);localStorage.setItem(f,h);if(i){localStorage.setItem(f+"_data",i)}else{localStorage.removeItem(f+"_data")}var l=getReturnURL(g);localStorage.setItem("backUrl",l);var k=c;mclaunchExternalURL(m,k)};e.fl.dynamicFormCreator=function(l,i){if(i.length!==3){throw new Error("Error: dynamicFormCreator was passed too few parameters")}var h=i[0];var f=i[1];var g=i[2];if(h){localStorage.setItem("creator_data",h)}else{localStorage.removeItem("creator_data")}if(f){localStorage.setItem("creator_config",f)}else{localStorage.removeItem("creator_config")}var k=getReturnURL(g);localStorage.setItem("creatorBackUrl",k);localStorage.setItem("shellType","mDesign");var j=b;mclaunchExternalURL(l,j)};e.fl.md10Viewer=function(m,j){if(j.length!==4){throw new Error("Error: md10Viewer was passed too few parameters")}var f=j[0];var h=j[1];var i=j[2];var g=j[3];if(!f){throw new Error("Error: md10Viewer appName can not be empty")}if(!h){throw new Error("Error: md10Viewer schema can not be empty")}localStorage.setItem("appName",f);localStorage.setItem(f,h);if(i){localStorage.setItem(f+"_data",i)}else{localStorage.removeItem(f+"_data")}var l=getReturnURL(g);localStorage.setItem("backUrl",l);var k=a;mclaunchExternalURL(m,k)};getReturnURL=function(h){var i=window.locationUtils.getURI().toString();var f=i.indexOf("#");if(f>=0){i=i.substring(0,f)}var g=i+"#"+h;log.warn("Back URL is "+g);return g};mclaunchExternalURL=function(h,g){e.db.setSubject(e.fl.currentsubject(),e.fl.currentsubjectobject(),true,f);function f(){var k,q,i,n,l,j,m,o;j=window.locationUtils.getURI();i=j.path().split("/");o=j.protocol();if(o.indexOf("x-wmapp")!=-1){e.showActivity();e.fl.gotourl("x-wmapp0:resources/mdesign/0/"+g)}else{if(j.protocol()=="file"||j.protocol()=="ms-appx"){e.showActivity();e.fl.gotourl("../../../"+g)}else{var r="../../../"+g;n=r.split("/");q=i.length-1;for(k=0;k<n.length;k++){if(n[k]==".."){i[q-k]=""}else{i[k]=n[k]}}l=i.join(" ").trim();n=l.split(" ");l=n.join("/");m=j;m.protocol(o);m.path(l);e.showActivity();e.fl.gotourl(m.toString())}}e.hideActivity();h.resume()}}}(window.jmfw,window.mCapture));